# elearningfinal

A new Flutter project.

## Getting Started

This project is a starting point for a Flutter application.

A few resources to get you started if this is your first Flutter project:

- [Lab: Write your first Flutter app](https://docs.flutter.dev/get-started/codelab)
- [Cookbook: Useful Flutter samples](https://docs.flutter.dev/cookbook)

For help getting started with Flutter development, view the
[online documentation](https://docs.flutter.dev/), which offers tutorials,
samples, guidance on mobile development, and a full API reference.

## Firebase setup (Firestore, Authentication, Storage)

This project includes Firebase integration with **role-based system** (Student & Instructor):

- **User Model**: `lib/models/user_model.dart` (role selection)
- **Authentication Service**: `lib/services/auth_service.dart`
- **Firestore Service**: `lib/services/firestore_service.dart`
- **Storage Service**: `lib/services/storage_service.dart`

### Role-Based Features

#### Student (Há»c sinh)
- âœ… Sign up and login
- âœ… Browse enrolled courses
- ğŸ”„ Browse available courses & enroll
- ğŸ”„ View course materials (PDF, DOC)
- ğŸ”„ Take quizzes
- ğŸ”„ Submit assignments (files < 50MB: .rar, .zip)
- ğŸ”„ View grades and feedback

#### Instructor (Giáº£ng viÃªn)
- âœ… Sign up and login
- âœ… Create and manage courses
- ğŸ”„ Upload lecture notes (PDF, DOC < 50MB)
- ğŸ”„ Import student list (CSV file)
- ğŸ”„ Create quizzes
- ğŸ”„ Upload assignments with PDF/DOC
- ğŸ”„ Grade student submissions
- ğŸ”„ View course analytics

### Quick Start

1. **Install dependencies**:
   ```powershell
   flutter pub get
   ```

2. **Configure Firebase** (already done, but if needed again):
   ```powershell
   flutterfire configure
   ```

3. **Setup Firestore Security Rules** (DEV/TEST MODE):
   - Go to Firebase Console â†’ Firestore â†’ Rules
   - Replace with:
   ```
   rules_version = '2';
   service cloud.firestore {
     match /databases/{database}/documents {
       match /{document=**} {
         allow read, write: if true;
       }
     }
   }
   ```
   - Click "Publish"

4. **Add sample data to Firestore**:
   - Go to Firebase Console â†’ Firestore â†’ Data
   - Create collection: `courses`
   - Add documents with fields: `name`, `instructor`, `description`, `colorHex`
   - See `FIRESTORE_SETUP.md` for detailed instructions

5. **Run the app**:
   ```powershell
   flutter run -d chrome    # Web
   flutter run -d android   # Android
   flutter run -d windows   # Windows
   ```

### Features & Testing

**Authentication**:
- âœ… Sign up with email/password
- âœ… Sign in with email/password
- âœ… Sign out
- âœ… Error messages in Vietnamese

### Features & Testing

**Authentication**:
- âœ… Sign up with email/password + role selection
- âœ… Sign in with email/password
- âœ… Role-based dashboard routing
- âœ… Sign out
- âœ… Error messages in Vietnamese

**Dashboard**:
- âœ… StudentDashboard - view enrolled courses
- âœ… InstructorDashboard - view created courses
- âœ… User profile in Drawer
- âœ… Logout functionality

**Firestore Integration**:
- âœ… Real-time course list (StreamBuilder)
- âœ… Fetch courses based on role
- âœ… Store user role in Firestore
- âœ… Empty state handling

**UI/Navigation**:
- âœ… Login/SignUp tabs with role selection
- âœ… Student and Instructor dashboards
- âœ… User profile display in Drawer
- âœ… Drawer navigation with user info

For detailed role-based feature documentation, see `ROLE_BASED_SYSTEM.md`

For detailed testing guide, see `TEST_GUIDE.md`

### Project Structure

```
lib/
â”œâ”€â”€ main.dart                  # App entry point + screens (Login, CourseList, CourseDetail)
â”œâ”€â”€ firebase_options.dart      # Firebase config (generated by FlutterFire CLI)
â”œâ”€â”€ models/
â”‚   â””â”€â”€ course.dart            # Course model with Firestore serialization
â””â”€â”€ services/
    â”œâ”€â”€ auth_service.dart      # Firebase Auth wrapper
    â”œâ”€â”€ firestore_service.dart # Firestore wrapper
    â””â”€â”€ storage_service.dart   # Firebase Storage wrapper
```

### Debugging

- **Hot reload**: Ctrl+S or press 'r' in terminal
- **Hot restart**: Press 'R' (Shift+R) in terminal
- **View logs**: 
  - Web: F12 â†’ Console
  - Android: `flutter logs`
  
### Common Issues & Fixes

| Issue | Solution |
|-------|----------|
| "Permission denied" | Set Firestore rules to test mode (allow read/write: if true) |
| "Email is badly formatted" | Email must contain `@` (e.g., test@example.com) |
| "Operation timed out" | Check internet connection, restart app |
| "No courses visible" | Add documents to `courses` collection in Firestore |

### Next Steps (Future Enhancements)

- [ ] File upload to Storage (avatar, documents)
- [ ] Real-time messaging
- [ ] Course creation/enrollment
- [ ] Assignments & submissions
- [ ] Push notifications

### Files Added/Modified

- `lib/main.dart` â€” Complete UI with role-based routing
- `lib/models/user_model.dart` â€” **NEW** User model with role enum
- `lib/models/course.dart` â€” Updated with instructor & student tracking
- `lib/services/` â€” Enhanced with student/instructor-specific methods
- `pubspec.yaml` â€” Firebase packages configured
- `ROLE_BASED_SYSTEM.md` â€” **NEW** Complete role-based system documentation
- `TEST_GUIDE.md` â€” Testing procedures for all features
- `FIRESTORE_SETUP.md` â€” Firestore configuration guide

### Learn More

- [Firebase for Flutter](https://firebase.google.com/docs/flutter/setup)
- [Cloud Firestore](https://firebase.google.com/docs/firestore)
- [Firebase Authentication](https://firebase.google.com/docs/auth)